<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Modularization & MVC</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
        <div>
            <h2>Key Pieces of the Express MVC</h2>
            <dl>
                <dt><strong>Routes File.</strong> In Express the routes file functions in a dual capacity:</dt>
                    <dd>1. They route to different Mongoose Controller methods.</dd>
                    <dd>2. They can also function directly as a Controller.</dd>
                    <dd>3. Our preference is to route them through a file in the ‘Controllers’ folder and call methods from the object that is exported by that file, rather than the latter, thus keeping the routes file, truly, just a routes file.</dd>
                <br>
                <dt><strong>The Controllers Files.</strong> These function as a typical Controller file. They dictate which data get returned using the response object (e.g. res.json()), often after communicating with a models file. Controllers rely heavily on promises/callbacks to determine when data can be returned to the views.</dt>
                <br>
                <dt><strong>The Models Files.</strong> These are the blueprints for communication with the database. In addition, the models files can be used to do logic (e.g. validation) prior to saving information, and filtering when returning information. We have intentionally kept the models we have demonstrated lean in our examples but know that the MVC's ideal of Thin Controllers and Fat Models remains intact in the Express.</dt>
                <br>
                <dt><strong>The Mongoose Connection File.</strong> As written, this file allows us to connect to the database and loads all of the files with a .js extension that is found in the models folder.</dt>
            </dl>
            Hint: Put console.log of the file type on the top of each of your files to make sure that they load in the right order!
            <br>
            <h2>Key Pieces of the Angular Front End Framework</h2>
            <dl>
                <dt><strong>The Angular Module File(s) (app.js?)</strong>.  The Angular module file creates a module that we can use in our views.</dt>
                    <dl>1. This generally includes providers, such as ‘ngRoute’, ‘ngCookies’, etc.</dl>
                    <dl>2. In addition, this file often includes the .config specifications, including the routeProvider which will generate routes that load partial views into the ng-view directive.</dl>
                <br>
                <dt><strong>Angular Factories.</strong>The factories files are singleton services that generate an object that can be injected into other directives. We primarily use the factories to inject into the <strong>Angular controllers</strong>. In this use case: the Factory can be used to store local data as well as communicate with the server via $http requests that are caught by the <strong>Routes</strong> file and generally return JSON information to the factory which is handled by a promise.</dt>
                <br>
                <dt><strong>Angular Controllers.</strong>The controllers integrate with the Factories and the HTML view (generally a partial view) that they are controlling, enabling data to be handled by Angular. Data are not passed from controller to controller directly, in most cases, but rather through an Angular Factory that is injected into each of the communicating controllers.</dt>
            </dl>
        </div>
        <div>
            <h2>Each of the following pieces can be built separately:</h2>
            <dl>
                <dt><strong>1) A simple server.  This just needs to require/import the right files</strong></dt>
                    <dd>- Integration with MVC: routes.js</dd>
                <dt><strong>2) The routes, controllers, models and mongoose connection.  These files work as a team to listen for data to the server depending on requests caught by rougts.js.</strong></dt>
                    <dd>- Integration through routes (HTTP requests) from factories (for JSON)(and routeProvider for partial views</dd>
                <dt><strong>3) An angular front end. Factories and routeProvider can be set to be the only piece of angular that communicates with the server. The remaining Angular code can be written independently of a server.</strong></dt>
            </dl>
        </div>
        <img src="full-mean-req-res.png">
    
    </body>
</html>